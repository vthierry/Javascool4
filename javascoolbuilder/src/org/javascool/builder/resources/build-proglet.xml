<?xml version="1.0" encoding="UTF-8"?>
<project name="javascool-${proglet.name}" default="default" basedir=".">
    <description>Builds, tests, and runs the project Java's Cool Core.</description>
    
    <target name="default">
        <mkdir dir="${proglet.doc}" />
        <copy todir="${proglet.doc}">
            <fileset dir="doc">
                <include name="*.xml" />
            </fileset>
        </copy>
        <delete dir="doc" />
        <xslt basedir="${proglet.doc}" destdir="${proglet.doc}" extension=".htm" style="${jvs.hdocxslt}">
            <include name="*.xml"/>
            <classpath location="${jvs.saxon}" />
        </xslt>
        <delete dir="${proglet.src}"/>
        <mkdir dir="${proglet.build}"/>
        <mkdir dir="${proglet.src}"/>
        <mkdir dir="${jvs.tojar.tmp}"/>
        <copy todir="${proglet.src}">
            <fileset dir="."/>
            <fileset dir="${proglet.doc}">
                <include name="*.htm"/>
            </fileset>
        </copy>
        <delete dir="${proglet.doc}"/>
        <javac srcdir="${proglet.src}" destdir="${proglet.build}" includeantruntime="false" classpath="${jvs.basejar}">
        </javac>
        <copy todir="${proglet.build}">
            <fileset dir="${proglet.src}">
                <exclude name="*.xml" />
                <exclude name="*.java" />
            </fileset>
        </copy>
        <mkdir dir="${proglet.build}/src" />
        <copy todir="${proglet.build}/src">
            <fileset dir="."/>
        </copy>
        
        <delete file="${proglet.build}/*.xml"/>
        <delete file="${proglet.build}/build.htm"/>
        
        <mkdir dir="${jvs.tojar.tmp}/org/javascool/proglets/${proglet.name}"/>
        <copy todir="${jvs.tojar.tmp}/org/javascool/proglets/${proglet.name}">
            <fileset dir="${proglet.build}">
                <exclude name="org/"/>
            </fileset>
        </copy>
        <copy todir="${jvs.tojar.tmp}/org/javascool/proglets/${proglet.name}">
            <fileset dir="${proglet.build}/org/javascool/proglets/${proglet.name}">
            </fileset>
        </copy>
        
  <!--      <delete dir="${proglet.src}"/>
        <delete dir="${proglet-build}"/>-->
    </target>
</project>